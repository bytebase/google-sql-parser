INSERT OR IGNORE INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT DO NOTHING;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT DO NOTHING;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT DO UPDATE
SET a = a + excluded.a;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT DO UPDATE
SET a = a + excluded.a
WHERE b > 10;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT(a) DO NOTHING;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT(a, b) DO NOTHING;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT ON UNIQUE CONSTRAINT index DO NOTHING;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT ON UNIQUE CONSTRAINT index DO UPDATE
SET a = a + excluded.a;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT(a) DO NOTHING
THEN RETURN WITH ACTION AS myaction
  a,
  b;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT(a) DO NOTHING
ASSERT_ROWS_MODIFIED 1;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT DO NOTHING
ASSERT_ROWS_MODIFIED 1
THEN RETURN WITH ACTION AS ACTION
  a,
  b;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT(a) DO UPDATE
SET a = a + excluded.a
WHERE b < 10
ASSERT_ROWS_MODIFIED 5
THEN RETURN WITH ACTION AS ACTION
  a,
  b;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT(a) DO UPDATE
SET a = a + excluded.a
WHERE b < 10
ASSERT_ROWS_MODIFIED 5;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT(a) DO UPDATE
SET a = a + excluded.a
WHERE b < 10
THEN RETURN
  a,
  excluded.a;
INSERT INTO T(a, b)
(
SELECT
  a,
  b
FROM
  otherT
)
ON CONFLICT DO NOTHING;
INSERT INTO T(a, b)
(
SELECT
  a,
  b
FROM
  otherT
  JOIN
  T
  ON T.a = otherT.a
)
ON CONFLICT(a) DO UPDATE
SET a = a + excluded.a
WHERE b < 10;
INSERT INTO T(a, b)
VALUES
  (1, 2)
ON CONFLICT ON UNIQUE CONSTRAINT index DO NOTHING
THEN RETURN
  a;
INSERT INTO T(a, b)
(
SELECT
  a,
  b
FROM
  otherT
  JOIN
  T
  ON conflict = conflict2
)
ON CONFLICT(a) DO UPDATE
SET a = a + excluded.a;
